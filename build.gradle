plugins {
    id 'nebula.release' version '17.2.0'
    id 'org.sonarqube' version '4.0.0.2929'
    id 'com.netflix.nebula.contacts' version '7.0.0'
}

contacts {
    'laa-crime-apps@digital.justice.gov.uk' {
        moniker 'Crime Applications Team'
        role 'owner'
    }
}

subprojects {
    apply plugin: "java"

    sourceCompatibility = JavaVersion.VERSION_17
    group = 'uk.gov.justice.laa.crime'
    description = 'Crime Applications Shared Libraries'

    repositories {
        mavenCentral()
    }
}

sonar {
    properties {
        property "sonar.projectName", "laa-crime-commons"
        property "sonar.host.url", "https://sonarcloud.io"
        property "sonar.organization", "ministryofjustice"
        property "sonar.projectKey", "ministryofjustice_laa-crime-commons"
    }
}

project(":crime-commons-spring-boot-starter") {
    apply plugin: 'org.sonarqube'
    sonar {
        properties {
            property "sonar.coverage.jacoco.xmlReportPaths",
                    "${project(':crime-commons-spring-boot-starter').buildDir}/reports/jacoco/test/jacocoTestReport.xml"
            property "sonar.exclusions", "**/RetryConfiguration.java, **/exception/**.java"
            property "sonar.coverage.exclusions", "**/RetryConfiguration.java, **/exception/**.java"
        }
    }
}

project(":samples") {
    sonar {
        skipProject = true
    }
}
